>[!tldr]
>2系列没有考虑丢包
>1. 怎样检测丢包
>2. 发生丢包后该做些什么

方法：发送方等待ACK一段 `合理的时间` (链路层的timeout时间确定的 传输层timeout时间是适应式的)

从发送方的观点来看，重传是一种万能灵药 。 发送方不知道是一个数据分组丢失，还是一个 ACK 丢失，或者只是该分组或 ACK 过度延时 。 在所有这些情况下，动作是同样的：**重传**。

为了实现基于时间的重传机制，需要一个**倒计数定时器**(countdown timer) ，在 一个给定的时间量过期后，可中断发送方 。 因此，发送方需要能做到:

1. 每次发送一个分组(包括第一次分组和重传分组)时，便启动一个定时器
2. 响应定时器中断(采取适当的动作) 。 
3. 终止定时器 。



## rdt3.0有限状态机

![在这里插入图片描述|625](https://img-blog.csdnimg.cn/2166545ebd6146a7876bf5ba4e3ecde1.png)

发送方传输开始时，`start_timer`启动计时器。如果`timeout`传输超时，则重新启动计时器；如果在规定时间内接收到反馈，则`stop_timer`结束计时。

![在这里插入图片描述](https://img-blog.csdnimg.cn/b82d6d8c3ed64c3780e231a6937b4e74.png)

## rdt3.0性能

![在这里插入图片描述|650](https://img-blog.csdnimg.cn/a945fe0d7f1149c8a4fa427e91304c56.png)