```mermaid
flowchart TD
    A[开始] --> B[解析参数 parse_arguments]
    B --> C[加载模型 load_LLM]
    C --> D[处理数据集参数]
    D --> E[循环处理每个数据集]
    
    E --> F[run_test函数]
    
    F --> G{检查输出文件是否存在}
    G -->|存在且不覆盖| H[返回输出路径]
    G -->|不存在或需覆盖| I[加载数据 load_data]
    
    I --> J[创建DataLoader]
    J --> K[开始处理样本]
    
    K --> L[循环处理每个样本]
    L --> M[模型生成输出]
    M --> N[后处理输出]
    N --> O[收集指标]
    O --> P{是否还有样本}
    P -->|是| L
    P -->|否| Q[计算平均指标]
    
    Q --> R[保存结果]
    R --> S{是否为alce数据集}
    S -->|是| T[运行eval_alce]
    S -->|否| U[结束]
    T --> U
    
    subgraph 错误处理
    V[异常处理]
    E --> V
    V --> E
    end
```



主要流程说明：

1. 初始化阶段：

	- 记录日志
	
	- 构建输出路径
	
	- 检查文件是否存在

2.  数据准备：

	- 设置随机种子
	
	- 加载数据
	
	- 创建 DataLoader

3. 主处理循环：
	
	- 对每个样本进行处理
	
	- 生成模型输出
	
	- 后处理和指标收集
	
	- 可选的示例打印

4. 结果处理：

	- 计算性能指标（内存使用、处理速度）
	
	- 计算平均指标
	
	- 保存结果

5.  特殊功能：
	
	- token 统计模式
	
	- 示例打印控制
	
	- 性能监控

这个流程图展示了 run_test 函数的详细执行过程，包括所有主要的条件分支和数据流向。需要对某个部分进行更详细的说明吗？